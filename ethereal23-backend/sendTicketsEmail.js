const doneUsers = [
  {
    user: {
      userId: "8e80f3a4-eae8-42a2-8091-f13fc5dbe650",
      type: "ETHEREAL",
      transactionId: "328206618548",
    },
    tickets: {
      user: {
        userId: "8e80f3a4-eae8-42a2-8091-f13fc5dbe650",
        type: "ETHEREAL",
        transactionId: "328206618548",
      },
      tickets: { eth_code: "be09af", transactionId: "328206618548" },
    },
  },
  {
    user: {
      userId: "fd194b48-6d45-41bf-91c1-3e4a8d2d2839",
      type: "ETHEREAL",
      transactionId: "328260500071",
    },
    tickets: {
      user: {
        userId: "fd194b48-6d45-41bf-91c1-3e4a8d2d2839",
        type: "ETHEREAL",
        transactionId: "328260500071",
      },
      tickets: { eth_code: "6caf39", transactionId: "328260500071" },
    },
  },
  {
    user: {
      userId: "5b943df8-3e5a-476b-a7ca-a5ad45775eab",
      type: "ETHEREAL",
      transactionId: "364803654577",
    },
    tickets: {
      user: {
        userId: "5b943df8-3e5a-476b-a7ca-a5ad45775eab",
        type: "ETHEREAL",
        transactionId: "364803654577",
      },
      tickets: { eth_code: "43d0fc", transactionId: "364803654577" },
    },
  },
  {
    user: {
      userId: "dffff6f4-6ab5-40c8-85d0-0b091a412c05",
      type: "ETHEREAL",
      transactionId: "364844770318",
    },
    tickets: {
      user: {
        userId: "dffff6f4-6ab5-40c8-85d0-0b091a412c05",
        type: "ETHEREAL",
        transactionId: "364844770318",
      },
      tickets: { eth_code: "4fb0fc", transactionId: "364844770318" },
    },
  },
  {
    user: {
      userId: "66ac23c5-5aef-4637-8abc-c1a66724364b",
      type: "ETHEREAL",
      transactionId: "364804123930",
    },
    tickets: {
      user: {
        userId: "66ac23c5-5aef-4637-8abc-c1a66724364b",
        type: "ETHEREAL",
        transactionId: "364804123930",
      },
      tickets: { eth_code: "7e0253", transactionId: "364804123930" },
    },
  },
  {
    user: {
      userId: "390ad59e-8b08-4302-9a12-044737c7a5fa",
      type: "ETHEREAL",
      transactionId: "364840577125",
    },
    tickets: {
      user: {
        userId: "390ad59e-8b08-4302-9a12-044737c7a5fa",
        type: "ETHEREAL",
        transactionId: "364840577125",
      },
      tickets: { eth_code: "68c219", transactionId: "364840577125" },
    },
  },
  {
    user: {
      userId: "a1812de2-7360-42df-945b-9a0fe7238c0e",
      type: "ETHEREAL",
      transactionId: "328262141901",
    },
    tickets: {
      user: {
        userId: "a1812de2-7360-42df-945b-9a0fe7238c0e",
        type: "ETHEREAL",
        transactionId: "328262141901",
      },
      tickets: { eth_code: "7accd9", transactionId: "328262141901" },
    },
  },
  {
    user: {
      userId: "ad61c0b1-adb8-4640-a7f7-f86d3cbe0958",
      type: "ETHEREAL",
      transactionId: "328286946927",
    },
    tickets: {
      user: {
        userId: "ad61c0b1-adb8-4640-a7f7-f86d3cbe0958",
        type: "ETHEREAL",
        transactionId: "328286946927",
      },
      tickets: { eth_code: "fcc1c8", transactionId: "328286946927" },
    },
  },
  {
    user: {
      userId: "a410bc41-597f-4506-ace4-0727ec667bd8",
      type: "ETHEREAL",
      transactionId: "328210068574",
    },
    tickets: {
      user: {
        userId: "a410bc41-597f-4506-ace4-0727ec667bd8",
        type: "ETHEREAL",
        transactionId: "328210068574",
      },
      tickets: { eth_code: "2ea895", transactionId: "328210068574" },
    },
  },
  {
    user: {
      userId: "c33b8909-ea45-4089-9075-093a8c60926f",
      type: "ETHEREAL",
      transactionId: "328287881231",
    },
    tickets: {
      user: {
        userId: "c33b8909-ea45-4089-9075-093a8c60926f",
        type: "ETHEREAL",
        transactionId: "328287881231",
      },
      tickets: { eth_code: "f28bdb", transactionId: "328287881231" },
    },
  },
  {
    user: {
      userId: "97daa852-e898-4a7d-913a-f8e941f29848",
      type: "ETHEREAL",
      transactionId: "328210202512",
    },
    tickets: {
      user: {
        userId: "97daa852-e898-4a7d-913a-f8e941f29848",
        type: "ETHEREAL",
        transactionId: "328210202512",
      },
      tickets: { eth_code: "0c70b2", transactionId: "328210202512" },
    },
  },
  {
    user: {
      userId: "9139af77-71f1-463d-869c-4b521810ce9b",
      type: "ETHEREAL",
      transactionId: "328202611429",
    },
    tickets: {
      user: {
        userId: "9139af77-71f1-463d-869c-4b521810ce9b",
        type: "ETHEREAL",
        transactionId: "328202611429",
      },
      tickets: { eth_code: "25292c", transactionId: "328202611429" },
    },
  },
  {
    user: {
      userId: "64d78de7-faa1-4f77-8f59-af529ed75bb6",
      type: "ETHEREAL",
      transactionId: "328264846019",
    },
    tickets: {
      user: {
        userId: "64d78de7-faa1-4f77-8f59-af529ed75bb6",
        type: "ETHEREAL",
        transactionId: "328264846019",
      },
      tickets: { eth_code: "e478be", transactionId: "328264846019" },
    },
  },
  {
    user: {
      userId: "35d0d742-314a-4302-853e-065bda566112",
      type: "ETHEREAL",
      transactionId: "328264821083",
    },
    tickets: {
      user: {
        userId: "35d0d742-314a-4302-853e-065bda566112",
        type: "ETHEREAL",
        transactionId: "328264821083",
      },
      tickets: { eth_code: "961946", transactionId: "328264821083" },
    },
  },
  {
    user: {
      userId: "1733be46-4b36-4525-93bc-558941d2306d",
      type: "ETHEREAL",
      transactionId: "328264906011",
    },
    tickets: {
      user: {
        userId: "1733be46-4b36-4525-93bc-558941d2306d",
        type: "ETHEREAL",
        transactionId: "328264906011",
      },
      tickets: { eth_code: "62a7c7", transactionId: "328264906011" },
    },
  },
  {
    user: {
      userId: "967ba0b3-78de-45ac-8ff2-8629a479079e",
      type: "ETHEREAL",
      transactionId: "328203300037",
    },
    tickets: {
      user: {
        userId: "967ba0b3-78de-45ac-8ff2-8629a479079e",
        type: "ETHEREAL",
        transactionId: "328203300037",
      },
      tickets: { eth_code: "662493", transactionId: "328203300037" },
    },
  },
  {
    user: {
      userId: "6888c676-12de-4df4-8d24-9d973a3e602d",
      type: "ETHEREAL",
      transactionId: "328211976534",
    },
    tickets: {
      user: {
        userId: "6888c676-12de-4df4-8d24-9d973a3e602d",
        type: "ETHEREAL",
        transactionId: "328211976534",
      },
      tickets: { eth_code: "1a7408", transactionId: "328211976534" },
    },
  },
  {
    user: {
      userId: "dd6ee0f8-f317-419b-91ab-1570c6dee79c",
      type: "ETHEREAL",
      transactionId: "328204579887",
    },
    tickets: {
      user: {
        userId: "dd6ee0f8-f317-419b-91ab-1570c6dee79c",
        type: "ETHEREAL",
        transactionId: "328204579887",
      },
      tickets: { eth_code: "a3b547", transactionId: "328204579887" },
    },
  },
  {
    user: {
      userId: "07097531-c025-48d8-a3e7-1ef8dd6c1d99",
      type: "ETHEREAL",
      transactionId: "328214620713",
    },
    tickets: {
      user: {
        userId: "07097531-c025-48d8-a3e7-1ef8dd6c1d99",
        type: "ETHEREAL",
        transactionId: "328214620713",
      },
      tickets: { eth_code: "465215", transactionId: "328214620713" },
    },
  },
  {
    user: {
      userId: "d8c724c7-a80d-48af-8532-313ec16553fa",
      type: "ETHEREAL",
      transactionId: "328205763788",
    },
    tickets: {
      user: {
        userId: "d8c724c7-a80d-48af-8532-313ec16553fa",
        type: "ETHEREAL",
        transactionId: "328205763788",
      },
      tickets: { eth_code: "1cf250", transactionId: "328205763788" },
    },
  },
  {
    user: {
      userId: "d0b28f3f-6bc1-4baf-ba65-a52d16f93e1e",
      type: "ETHEREAL",
      transactionId: "328270723359",
    },
    tickets: {
      user: {
        userId: "d0b28f3f-6bc1-4baf-ba65-a52d16f93e1e",
        type: "ETHEREAL",
        transactionId: "328270723359",
      },
      tickets: { eth_code: "0d01d1", transactionId: "328270723359" },
    },
  },
  {
    user: {
      userId: "0bb1b1d3-26a6-4cc6-8f08-eae6ee377888",
      type: "ETHEREAL",
      transactionId: "328270872185",
    },
    tickets: {
      user: {
        userId: "0bb1b1d3-26a6-4cc6-8f08-eae6ee377888",
        type: "ETHEREAL",
        transactionId: "328270872185",
      },
      tickets: { eth_code: "0bed11", transactionId: "328270872185" },
    },
  },
  {
    user: {
      userId: "ac81fc36-e5ab-4049-93bd-2fd14e4d34be",
      type: "ETHEREAL",
      transactionId: "364806386091",
    },
    tickets: {
      user: {
        userId: "ac81fc36-e5ab-4049-93bd-2fd14e4d34be",
        type: "ETHEREAL",
        transactionId: "364806386091",
      },
      tickets: { eth_code: "efcc42", transactionId: "364806386091" },
    },
  },
  {
    user: {
      userId: "1bc3e63e-2612-4d61-9592-db618342f7f8",
      type: "ETHEREAL",
      transactionId: "328249879565",
    },
    tickets: {
      user: {
        userId: "1bc3e63e-2612-4d61-9592-db618342f7f8",
        type: "ETHEREAL",
        transactionId: "328249879565",
      },
      tickets: { eth_code: "ff22c3", transactionId: "328249879565" },
    },
  },
  {
    user: {
      userId: "8c46541c-d918-4bf0-9896-91c2b7ce4db7",
      type: "ETHEREAL",
      transactionId: "328291988438",
    },
    tickets: {
      user: {
        userId: "8c46541c-d918-4bf0-9896-91c2b7ce4db7",
        type: "ETHEREAL",
        transactionId: "328291988438",
      },
      tickets: { eth_code: "47112e", transactionId: "328291988438" },
    },
  },
  {
    user: {
      userId: "0965ae63-c9b3-4623-9ad6-6b95a1478376",
      type: "ETHEREAL",
      transactionId: "328272528067",
    },
    tickets: {
      user: {
        userId: "0965ae63-c9b3-4623-9ad6-6b95a1478376",
        type: "ETHEREAL",
        transactionId: "328272528067",
      },
      tickets: { eth_code: "893d0a", transactionId: "328272528067" },
    },
  },
  {
    user: {
      userId: "7cc54f3e-ebd2-45cd-9d69-22088272a057",
      type: "ETHEREAL",
      transactionId: "328236192917",
    },
    tickets: {
      user: {
        userId: "7cc54f3e-ebd2-45cd-9d69-22088272a057",
        type: "ETHEREAL",
        transactionId: "328236192917",
      },
      tickets: { eth_code: "faf36d", transactionId: "328236192917" },
    },
  },
  {
    user: {
      userId: "7e17e76e-a420-45d0-b32d-07ba2ef56166",
      type: "ETHEREAL",
      transactionId: "328225965316",
    },
    tickets: {
      user: {
        userId: "7e17e76e-a420-45d0-b32d-07ba2ef56166",
        type: "ETHEREAL",
        transactionId: "328225965316",
      },
      tickets: { eth_code: "31dc7c", transactionId: "328225965316" },
    },
  },
  {
    user: {
      userId: "fe1768e4-4ad9-4df9-bf5b-ffa78d2d0151",
      type: "ETHEREAL",
      transactionId: "328216100698",
    },
    tickets: {
      user: {
        userId: "fe1768e4-4ad9-4df9-bf5b-ffa78d2d0151",
        type: "ETHEREAL",
        transactionId: "328216100698",
      },
      tickets: { eth_code: "ae1f0b", transactionId: "328216100698" },
    },
  },
  {
    user: {
      userId: "303eadde-b69d-42e2-acb8-3852357e03a9",
      type: "ETHEREAL",
      transactionId: "328236593812",
    },
    tickets: {
      user: {
        userId: "303eadde-b69d-42e2-acb8-3852357e03a9",
        type: "ETHEREAL",
        transactionId: "328236593812",
      },
      tickets: { eth_code: "e601e0", transactionId: "328236593812" },
    },
  },
  {
    user: {
      userId: "32adc0f3-da30-44e5-8cb4-c55e98ed3bdf",
      type: "ETHEREAL",
      transactionId: "364827692820",
    },
    tickets: {
      user: {
        userId: "32adc0f3-da30-44e5-8cb4-c55e98ed3bdf",
        type: "ETHEREAL",
        transactionId: "364827692820",
      },
      tickets: { eth_code: "8ab353", transactionId: "364827692820" },
    },
  },
  {
    user: {
      userId: "894c7a3f-cda8-4765-83fb-2e99574fa785",
      type: "ETHEREAL",
      transactionId: "364875796915",
    },
    tickets: {
      user: {
        userId: "894c7a3f-cda8-4765-83fb-2e99574fa785",
        type: "ETHEREAL",
        transactionId: "364875796915",
      },
      tickets: { eth_code: "6b309d", transactionId: "364875796915" },
    },
  },
  {
    user: {
      userId: "6f60f255-c969-4aac-8668-802388d0d614",
      type: "ETHEREAL",
      transactionId: "364828626403",
    },
    tickets: {
      user: {
        userId: "6f60f255-c969-4aac-8668-802388d0d614",
        type: "ETHEREAL",
        transactionId: "364828626403",
      },
      tickets: { eth_code: "376a0e", transactionId: "364828626403" },
    },
  },
  {
    user: {
      userId: "3b9565f3-eff2-4b81-8c9a-dd6e2fce22cb",
      type: "ETHEREAL",
      transactionId: "328203051519",
    },
    tickets: {
      user: {
        userId: "3b9565f3-eff2-4b81-8c9a-dd6e2fce22cb",
        type: "ETHEREAL",
        transactionId: "328203051519",
      },
      tickets: { eth_code: "24d0de", transactionId: "328203051519" },
    },
  },
  {
    user: {
      userId: "1b16f04a-256f-4839-b819-3a2ec529806e",
      type: "ETHEREAL",
      transactionId: "328287434977",
    },
    tickets: {
      user: {
        userId: "1b16f04a-256f-4839-b819-3a2ec529806e",
        type: "ETHEREAL",
        transactionId: "328287434977",
      },
      tickets: { eth_code: "7b7752", transactionId: "328287434977" },
    },
  },
  {
    user: {
      userId: "77c1a9e4-396e-404a-a709-88b476c8be6b",
      type: "ETHEREAL",
      transactionId: "328222219525",
    },
    tickets: {
      user: {
        userId: "77c1a9e4-396e-404a-a709-88b476c8be6b",
        type: "ETHEREAL",
        transactionId: "328222219525",
      },
      tickets: { eth_code: "085006", transactionId: "328222219525" },
    },
  },
  {
    user: {
      userId: "27445478-7a7b-4605-a862-0a93cadc5512",
      type: "ETHEREAL",
      transactionId: "328223478491",
    },
    tickets: {
      user: {
        userId: "27445478-7a7b-4605-a862-0a93cadc5512",
        type: "ETHEREAL",
        transactionId: "328223478491",
      },
      tickets: { eth_code: "fef775", transactionId: "328223478491" },
    },
  },
  {
    user: {
      userId: "0041879a-a0ca-4b41-a080-42ad48154e5e",
      type: "ETHEREAL",
      transactionId: "328224281607",
    },
    tickets: {
      user: {
        userId: "0041879a-a0ca-4b41-a080-42ad48154e5e",
        type: "ETHEREAL",
        transactionId: "328224281607",
      },
      tickets: { eth_code: "ddd179", transactionId: "328224281607" },
    },
  },
  {
    user: {
      userId: "fa8cd15b-8d37-4ec7-8f67-16f1ab760786",
      type: "ETHEREAL",
      transactionId: "328221652795",
    },
    tickets: {
      user: {
        userId: "fa8cd15b-8d37-4ec7-8f67-16f1ab760786",
        type: "ETHEREAL",
        transactionId: "328221652795",
      },
      tickets: { eth_code: "d3b0a0", transactionId: "328221652795" },
    },
  },
  {
    user: {
      userId: "e86fc91d-8a2d-4145-9117-cd490af3260d",
      type: "ETHEREAL",
      transactionId: "328252613614",
    },
    tickets: {
      user: {
        userId: "e86fc91d-8a2d-4145-9117-cd490af3260d",
        type: "ETHEREAL",
        transactionId: "328252613614",
      },
      tickets: { eth_code: "a4c32c", transactionId: "328252613614" },
    },
  },
  {
    user: {
      userId: "667995af-5689-4df8-a6e5-00ee34e19992",
      type: "ETHEREAL",
      transactionId: "328213032152",
    },
    tickets: {
      user: {
        userId: "667995af-5689-4df8-a6e5-00ee34e19992",
        type: "ETHEREAL",
        transactionId: "328213032152",
      },
      tickets: { eth_code: "874e1c", transactionId: "328213032152" },
    },
  },
  {
    user: {
      userId: "af6a7197-c326-428b-becf-943827dc0959",
      type: "ETHEREAL",
      transactionId: "364836515800",
    },
    tickets: {
      user: {
        userId: "af6a7197-c326-428b-becf-943827dc0959",
        type: "ETHEREAL",
        transactionId: "364836515800",
      },
      tickets: { eth_code: "12b40c", transactionId: "364836515800" },
    },
  },
  {
    user: {
      userId: "e7747223-4c4c-4cbc-a71d-dbbc8278e059",
      type: "ETHEREAL",
      transactionId: "328213248707",
    },
    tickets: {
      user: {
        userId: "e7747223-4c4c-4cbc-a71d-dbbc8278e059",
        type: "ETHEREAL",
        transactionId: "328213248707",
      },
      tickets: { eth_code: "7be22b", transactionId: "328213248707" },
    },
  },
  {
    user: {
      userId: "d2c0cf1a-2ea3-4748-846f-76e37e931892",
      type: "ETHEREAL",
      transactionId: "364888714576",
    },
    tickets: {
      user: {
        userId: "d2c0cf1a-2ea3-4748-846f-76e37e931892",
        type: "ETHEREAL",
        transactionId: "364888714576",
      },
      tickets: { eth_code: "0c25f7", transactionId: "364888714576" },
    },
  },
  {
    user: {
      userId: "5bf4b2f1-a17b-4f40-bd49-4f5e482eadf5",
      type: "ETHEREAL",
      transactionId: "328215108860",
    },
    tickets: {
      user: {
        userId: "5bf4b2f1-a17b-4f40-bd49-4f5e482eadf5",
        type: "ETHEREAL",
        transactionId: "328215108860",
      },
      tickets: { eth_code: "5971bb", transactionId: "328215108860" },
    },
  },
  {
    user: {
      userId: "03810915-5d48-4930-8184-eb68b59ce743",
      type: "ETHEREAL",
      transactionId: "328227262944",
    },
    tickets: {
      user: {
        userId: "03810915-5d48-4930-8184-eb68b59ce743",
        type: "ETHEREAL",
        transactionId: "328227262944",
      },
      tickets: { eth_code: "d14e46", transactionId: "328227262944" },
    },
  },
  {
    user: {
      userId: "0e627cda-4e53-4523-a3d1-50dcdda57b91",
      type: "ETHEREAL",
      transactionId: "364845173801",
    },
    tickets: {
      user: {
        userId: "0e627cda-4e53-4523-a3d1-50dcdda57b91",
        type: "ETHEREAL",
        transactionId: "364845173801",
      },
      tickets: { eth_code: "55b375", transactionId: "364845173801" },
    },
  },
  {
    user: {
      userId: "ed6cd601-7d9f-40a8-8d4d-70a3f05ed302",
      type: "OC_CONCERT",
      transactionId: "328258397848",
    },
    codes: {
      concert_code: "fc82fd",
      concert: "concert_710fc517-dbcf-4703-80ca-9bcf0ec49267",
      transactionId: "328258397848",
    },
  },
  {
    user: {
      userId: "ec0a4ec2-fa37-449d-9c05-6debac3708bf",
      type: "OC_CONCERT",
      transactionId: "328285007016",
    },
    codes: {
      concert_code: "09c9e8",
      concert: "concert_06f2276e-74fa-4dd2-82f9-e733fbceeed2",
      transactionId: "328285007016",
    },
  },
  {
    user: {
      userId: "2945a11c-7c2b-4108-a5eb-47b13b9d435f",
      type: "IC_COMBO_CONCERT",
      transactionId: "328247177687",
    },
    codes: {
      concert_code: "0093cc",
      concert: "concert_2ceed47e-d35f-485e-8514-b79c18806c3d",
      transactionId: "328247177687",
    },
  },
  {
    user: {
      userId: "db98515b-428b-46d4-96c3-2f995114200b",
      type: "IC_COMBO_CONCERT",
      transactionId: "364850181955",
    },
    codes: {
      concert_code: "ebe5b6",
      concert: "concert_a3e0e6f3-21b3-40a6-b132-2c081cd24b8e",
      transactionId: "364850181955",
    },
  },
  {
    user: {
      userId: "517ac741-7268-422f-93a9-44a042c8baa5",
      type: "IC_COMBO_CONCERT",
      transactionId: "328262177833",
    },
    codes: {
      concert_code: "046cdf",
      concert: "concert_f56edd02-0d0f-4e01-8ff0-7a8f02b4327c",
      transactionId: "328262177833",
    },
  },
  {
    user: {
      userId: "57d292c8-45be-4e99-b947-5ef599812fb4",
      type: "OC_CONCERT",
      transactionId: "328266873029",
    },
    codes: {
      concert_code: "049aca",
      concert: "concert_af7e871f-613f-479f-9850-19ecdf3c7308",
      transactionId: "328266873029",
    },
  },
  {
    user: {
      userId: "050bbb62-e334-486e-8d00-79d5da07b346",
      type: "IC_COMBO_CONCERT",
      transactionId: "328208316574",
    },
    codes: {
      concert_code: "74c2b9",
      concert: "concert_710d8796-af4e-4f03-a05e-f1bbd585e561",
      transactionId: "328208316574",
    },
  },
  {
    user: {
      userId: "076d00b5-2189-43c8-a10b-58001b9b924b",
      type: "OC_CONCERT",
      transactionId: "328296398094",
    },
    codes: {
      concert_code: "caf58a",
      concert: "concert_e50429ed-7fbe-4760-b8c3-e5d0966b0c89",
      transactionId: "328296398094",
    },
  },
  {
    user: {
      userId: "01eb6732-ec28-4eb0-8a42-f1e2fd63fbad",
      type: "OC_CONCERT",
      transactionId: "328276037058",
    },
    codes: {
      concert_code: "86c3ac",
      concert: "concert_ff5e02b1-50be-48ed-87e2-21a37d07f749",
      transactionId: "328276037058",
    },
  },
  {
    user: {
      userId: "45aa5ed6-0ab1-4a46-962f-d2ec1e09de8d",
      type: "IC_COMBO_CONCERT",
      transactionId: "328299669309",
    },
    codes: {
      concert_code: "35a0f7",
      concert: "concert_00b29e9a-e801-430b-83fa-f04b824a71ca",
      transactionId: "328299669309",
    },
  },
  {
    user: {
      userId: "a1ec717e-1fb9-4861-a7e2-8f840e589051",
      type: "OC_CONCERT",
      transactionId: "328281092052",
    },
    codes: {
      concert_code: "d071b6",
      concert: "concert_56b686cb-c3f7-4c7b-a68e-178db5b7f718",
      transactionId: "328281092052",
    },
  },
  {
    user: {
      userId: "cd051821-e770-49f2-8d56-92e555056681",
      type: "IC_CONCERT",
      transactionId: "328282308818",
    },
    codes: {
      concert_code: "095c0f",
      concert: "concert_7b6c1d28-a419-48bc-a1f5-704d708d5d2d",
      transactionId: "328282308818",
    },
  },
  {
    user: {
      userId: "3339d14b-3593-46b1-a44e-f5abfd270b38",
      type: "OC_CONCERT",
      transactionId: "328284278234",
    },
    codes: {
      concert_code: "ae6b4a",
      concert: "concert_ac1f9c8e-df98-4772-b630-71851ffb90ff",
      transactionId: "328284278234",
    },
  },
  {
    user: {
      userId: "8bb37c59-b4d7-491a-9017-eda44d5af712",
      type: "OC_CONCERT",
      transactionId: "328294012628",
    },
    codes: {
      concert_code: "a660cb",
      concert: "concert_ff5ae36f-d9c3-4ec3-88fc-238039d55e66",
      transactionId: "328294012628",
    },
  },
  {
    user: {
      userId: "2f094db1-2876-4dbb-898d-135436b9848b",
      type: "IC_COMBO_CONCERT",
      transactionId: "328213732101",
    },
    codes: {
      concert_code: "1ea2cc",
      concert: "concert_a278a6c8-f8c0-415b-9f75-b5f0ad1bf003",
      transactionId: "328213732101",
    },
  },
];
const nodemailer = require("nodemailer");
const { Client } = require("pg");
const dotenv = require("dotenv");
const fs = require("fs");

dotenv.config();

const pgURL = process.env.PG_EXTERNAL_DATABASE_URL;

const dbConfig = {
  connectionString: pgURL,
  ssl: true,
};
const client = new Client(dbConfig);
client.connect().then((res) => {
  console.log("Connected to the Render Database");
});

const fromEmail = process.env.EMAIL_USER;
const emailTransporter = nodemailer.createTransport({
  // secure: true,
  port: process.env.EMAIL_PORT,
  host: process.env.EMAIL_HOST,
  // service: process.env.EMAIL_SERVICE,
  auth: {
    user: fromEmail,
    pass: process.env.EMAIL_PASS,
  },
});

console.log(doneUsers.length);

const func = async (toSendUsers) => {
  let arr = [];

  const users = await client.query("SELECT * FROM users", []);
  toSendUsers.forEach((tsUser) => {
    const filtered = users.rows.filter((user) => user.id == tsUser.user.userId);
    arr.push({ user: filtered[0], tid: tsUser.user.transactionId });
  });

  console.log(arr.length);
  // console.log(arr);

  // arr = [
  //   {
  //     user: {
  //       id: "bbe53b47-9523-4941-b30a-e9d98eb37caf",
  //       name: "Dharun",
  //       email: "20ad09@kcgcollege.com",
  //       phone: "6382298084",
  //       ethereal: null,
  //       concert: "concert_dsfasfads_ASDfsdf_ASdfasfs_SDFadf",
  //       combo_eligible: null,
  //       logged_in: true,
  //       otp: null,
  //       college: "KCG College Of Technology",
  //       concert_code: 12345,
  //     },
  //     tid: "326911260001",
  //   },
  //   {
  //     user: {
  //       id: "7632f4f6-9c9c-4948-8fc3-5f0e59c13c80",
  //       name: "Sricharan",
  //       email: "onlysricharan@gmail.com",
  //       phone: "6380688350",
  //       ethereal: null,
  //       concert: null,
  //       combo_eligible: null,
  //       logged_in: true,
  //       otp: null,
  //       college: "K.C.G. College of Technology, Chennai",
  //       concert_code: null,
  //     },
  //     tid: "326911260002",
  //   },
  //   {
  //     user: {
  //       id: "7632f4f6-9c9c-4948-8fc3-5f0e59c13c80",
  //       name: "Sricharan",
  //       email: "dharunsivakumar@gmail.com",
  //       phone: "6380688350",
  //       ethereal: null,
  //       concert: null,
  //       combo_eligible: null,
  //       logged_in: true,
  //       otp: null,
  //       college: "K.C.G. College of Technology, Chennai",
  //       concert_code: null,
  //     },
  //     tid: "326911260002",
  //   },
  //   {
  //     user: {
  //       id: "bbe53b47-9523-4941-b30a-e9d98eb37caf",
  //       name: "Dharun",
  //       email: "20ad09@kcgcollege.com",
  //       phone: "6382298084",
  //       ethereal: null,
  //       concert: "concert_dsfasfads_ASDfsdf_ASdfasfs_SDFadf",
  //       combo_eligible: null,
  //       logged_in: true,
  //       otp: null,
  //       college: "KCG College Of Technology",
  //       concert_code: 12345,
  //     },
  //     tid: "326911260001",
  //   },
  //   {
  //     user: {
  //       id: "bbe53b47-9523-4941-b30a-e9d98eb37caf",
  //       name: "Dharun",
  //       email: "20ad09@kcgcollege.com",
  //       phone: "6382298084",
  //       ethereal: null,
  //       concert: "concert_dsfasfads_ASDfsdf_ASdfasfs_SDFadf",
  //       combo_eligible: null,
  //       logged_in: true,
  //       otp: null,
  //       college: "KCG College Of Technology",
  //       concert_code: 12345,
  //     },
  //     tid: "326911260001",
  //   },
  //   {
  //     user: {
  //       id: "bbe53b47-9523-4941-b30a-e9d98eb37caf",
  //       name: "Dharun",
  //       email: "20ad09@kcgcollege.com",
  //       phone: "6382298084",
  //       ethereal: null,
  //       concert: "concert_dsfasfads_ASDfsdf_ASdfasfs_SDFadf",
  //       combo_eligible: null,
  //       logged_in: true,
  //       otp: null,
  //       college: "KCG College Of Technology",
  //       concert_code: 12345,
  //     },
  //     tid: "326911260001",
  //   },
  //   {
  //     user: {
  //       id: "bbe53b47-9523-4941-b30a-e9d98eb37caf",
  //       name: "Dharun",
  //       email: "20ad09@kcgcollege.com",
  //       phone: "6382298084",
  //       ethereal: null,
  //       concert: "concert_dsfasfads_ASDfsdf_ASdfasfs_SDFadf",
  //       combo_eligible: null,
  //       logged_in: true,
  //       otp: null,
  //       college: "KCG College Of Technology",
  //       concert_code: 12345,
  //     },
  //     tid: "326911260001",
  //   },
  //   {
  //     user: {
  //       id: "bbe53b47-9523-4941-b30a-e9d98eb37caf",
  //       name: "Dharun",
  //       email: "20ad09@kcgcollege.com",
  //       phone: "6382298084",
  //       ethereal: null,
  //       concert: "concert_dsfasfads_ASDfsdf_ASdfasfs_SDFadf",
  //       combo_eligible: null,
  //       logged_in: true,
  //       otp: null,
  //       college: "KCG College Of Technology",
  //       concert_code: 12345,
  //     },
  //     tid: "326911260001",
  //   },
  //   {
  //     user: {
  //       id: "bbe53b47-9523-4941-b30a-e9d98eb37caf",
  //       name: "Dharun",
  //       email: "20ad09@kcgcollege.com",
  //       phone: "6382298084",
  //       ethereal: null,
  //       concert: "concert_dsfasfads_ASDfsdf_ASdfasfs_SDFadf",
  //       combo_eligible: null,
  //       logged_in: true,
  //       otp: null,
  //       college: "KCG College Of Technology",
  //       concert_code: 12345,
  //     },
  //     tid: "326911260001",
  //   },
  //   {
  //     user: {
  //       id: "bbe53b47-9523-4941-b30a-e9d98eb37caf",
  //       name: "Dharun",
  //       email: "20ad09@kcgcollege.com",
  //       phone: "6382298084",
  //       ethereal: null,
  //       concert: "concert_dsfasfads_ASDfsdf_ASdfasfs_SDFadf",
  //       combo_eligible: null,
  //       logged_in: true,
  //       otp: null,
  //       college: "KCG College Of Technology",
  //       concert_code: 12345,
  //     },
  //     tid: "326911260001",
  //   },
  //   {
  //     user: {
  //       id: "bbe53b47-9523-4941-b30a-e9d98eb37caf",
  //       name: "Dharun",
  //       email: "20ad09@kcgcollege.com",
  //       phone: "6382298084",
  //       ethereal: null,
  //       concert: "concert_dsfasfads_ASDfsdf_ASdfasfs_SDFadf",
  //       combo_eligible: null,
  //       logged_in: true,
  //       otp: null,
  //       college: "KCG College Of Technology",
  //       concert_code: 12345,
  //     },
  //     tid: "326911260001",
  //   },
  //   {
  //     user: {
  //       id: "bbe53b47-9523-4941-b30a-e9d98eb37caf",
  //       name: "Dharun",
  //       email: "20ad09@kcgcollege.com",
  //       phone: "6382298084",
  //       ethereal: null,
  //       concert: "concert_dsfasfads_ASDfsdf_ASdfasfs_SDFadf",
  //       combo_eligible: null,
  //       logged_in: true,
  //       otp: null,
  //       college: "KCG College Of Technology",
  //       concert_code: 12345,
  //     },
  //     tid: "326911260001",
  //   },
  // ];

  console.log(arr);

  arr.forEach((user, i) => {
    setTimeout(() => {
      console.log("\n--------------------------------\n");
      console.log(user);

      // //////////////////////////////////////////////////////////
      // //////////////////////////////////////////////////////////
      let htmlContent = fs.readFileSync(
        "./email/sendTickets/index.html",
        "utf8"
      );
      htmlContent = htmlContent.replace("${email_name}", user.user.name);
      htmlContent = htmlContent.replace("${email_ecode}", user.user.ethereal);
      htmlContent = htmlContent.replace(
        "${email_ccode}",
        user.user.concert_code
      );
      const mailOptions = {
        from: { name: "KCG Ethereal", address: fromEmail },
        to: user.user.email,
        subject: `Ticket Status ${user.tid}`,
        html: htmlContent,
      };
      emailTransporter.sendMail(mailOptions, (err, info) => {
        if (err) {
          console.error(err);
          res.json({ message: "Failed to send OTP via email", sent: false });
        } else {
          console.log(info);
          res.json({ message: "OTP sent to email", sent: true });
        }
      });
      // //////////////////////////////////////////////////////////
      // //////////////////////////////////////////////////////////
      console.log(i + 1);
      console.log("\n----------------", i + 1, "----------------\n");
    }, i * 2000);
  });
};

func(doneUsers);
